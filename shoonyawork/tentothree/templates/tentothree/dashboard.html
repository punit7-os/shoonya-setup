{% extends "base.html" %}


{% block title %}
  Running Dashboard 
{% endblock title %}

<style>
   {% block style %}
   
    

.output_1{
      color:red;
}

pre{
    display: block;
    font-size: 99.5%;
    color: #212529
}

{% endblock style %}
</style>
{% block body %}
  <div class="container">
    <h1 class="text-center">Runner</h1>
    <p>Last refreshed: <span id="last-refresh">{{ timestamp }}</span></p>
    <pre id="script-output">{{ console_output }}</pre><br>

    <table border="1">
        <tbody>
            {% for row in df_records %}
                <tr>
                    <td>{{ row.time }}</td>
                    <td>{{ row.into }}</td>
                    <td>{{ row.inth }}</td>
                    <td>{{ row.intc }}</td>
                    <td>{{ row.ssboe }}</td>
                    <td>{{ row.intv }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
  </div>
   
  <script>
    {% block script %}
    // Function to fetch updated script output using AJAX
    function fetchScriptOutput() {
    $.ajax({
        url: '/tentothree/ajax/',  // URL pattern for AJAX requests
        method: 'GET',
        success: function(data) {
            $('#script-output').text(data.output);
            $('#last-refresh').text(data.timestamp);
        },
        error: function(xhr, status, error) {
            console.error("AJAX error:", error);
        }
    });
}

// Periodically fetch the script output every 10 seconds (10000 milliseconds)
setInterval(fetchScriptOutput, 10000);

// Initial fetch when the page loads
fetchScriptOutput();

    {% endblock script %}
  </script>
{% endblock body %}

   