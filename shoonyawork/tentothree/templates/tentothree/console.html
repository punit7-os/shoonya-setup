<!DOCTYPE html>
<html>
<head>
    <title>Django Web Console</title>
    <style>
        body {
            font-family: monospace;
            background-color: #282c34;
            color: #61dafb;
            padding: 20px;
        }
        #console {
            background-color: #1c1c1c;
            color: #61dafb;
            padding: 10px;
            border: 1px solid #333;
            width: 100%;
            height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        #input-line {
            display: inline-block;
            width: 100%;
        }
        #input {
            width: 100%;
            border: none;
            background: none;
            color: #61dafb;
            outline: none;
            font-family: inherit;
        }
    </style>
</head>
<body>
    <h1>Django Web Console</h1>
    <div id="console">
        <div id="output"></div>
        <div id="input-line">
            <span>&gt;&gt;&gt;</span> <input type="text" id="input" autofocus>
        </div>
    </div>

    <script>
        document.getElementById('input').addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                let input = e.target.value;
                let outputDiv = document.getElementById('output');
                
                // Show the command in the console
                outputDiv.innerHTML += `>>> ${input}<br>`;
                
                // Process the command
                processCommand(input);
                
                // Clear the input field
                e.target.value = '';
            }
        });

        function processCommand(command) {
            // Example: Handle simple commands locally
            let outputDiv = document.getElementById('output');
            if (command === 'help') {
                outputDiv.innerHTML += 'Available commands: help, clear<br>';
            } else if (command === 'clear') {
                outputDiv.innerHTML = '';
            } else {
                // Send command to Django backend (optional)
                fetch('/process_command/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': '{{ csrf_token }}'
                    },
                    body: JSON.stringify({ command: command })
                })
                .then(response => response.json())
                .then(data => {
                    outputDiv.innerHTML += `${data.output}<br>`;
                });
            }
            
            // Scroll to bottom
            document.getElementById('console').scrollTop = document.getElementById('console').scrollHeight;
        }
    </script>
</body>
</html>
